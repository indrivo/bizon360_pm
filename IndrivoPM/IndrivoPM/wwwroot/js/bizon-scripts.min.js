var LOADER='<img class="bizon-loader" src="/img/loader.gif" alt="Loading..." />',LOADER_SM='<img class="bizon-loader loader-sm" src="/img/loader.gif" alt="Loading..." />',BUTTON_LOADER='<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>',BOOTSTRAP_LOADER='<div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>',deleteSuccessTitle="",deleteSuccessMessage="",deleteErrorTitle="",deleteErrorMessage="",deleteEventFunction=function(){},selectedRows=[],searchResult=[],searchIcons=[],redirectUrl="",nameParam="",dataParams={},parentID="",refreshTable=!1,projectStatus={Current:0,OnHold:1,Canceled:2,Completed:3};function formatBytes(bytes,decimals){if(0==bytes)return"0 Bytes";var k=1024,dm=decimals<=0?0:decimals||2,sizes=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(dm))+" "+sizes[i]}function openTab(evt,tabName){var i,tabcontent,tablinks;for(tabcontent=document.getElementsByClassName("tabcontent"),i=0;i<tabcontent.length;i++)tabcontent[i].style.display="none";for(tablinks=document.getElementsByClassName("tablinks"),i=0;i<tablinks.length;i++)tablinks[i].className=tablinks[i].className.replace(" active","");document.getElementById(tabName).style.display="block",evt.currentTarget.className+=" active"}function showInactive(item,containerId,table=!1){var THIS=$(item);"true"===THIS.attr("data-open")?($(containerId).attr("class","d-none"),THIS.attr("data-open",!1),THIS.removeClass("active")):(table?$(containerId).attr("class","collapse-datatable"):$(containerId).attr("class",""),THIS.attr("data-open",!0),THIS.addClass("active"))}function GetCookie(key){var start=document.cookie.indexOf(key+"=");if(-1==start)return null;var len=start+key.length+1;if(!start&&key!=document.cookie.substring(0,key.length))return null;var end=document.cookie.indexOf(";",len);return-1==end&&(end=document.cookie.length),unescape(document.cookie.substring(len,end))}function EnableSummerNote(objectSelector,toolBar=null){null===toolBar&&(toolBar=[["fontsize",["fontsize"]],["fontname",["fontname"]],["font",["bold","italic","underline","clear"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link"]]]);var editor=$(objectSelector);editor.summernote({dialogsInBody:!0,dialogsFade:!1,height:100,minHeight:206,maxHeight:400,focus:!0,popover:{image:[],link:[],air:[]},toolbar:toolBar,callbacks:{onPaste:function(e){var bufferText=((e.originalEvent||e).clipboardData||window.clipboardData).getData("Text");e.preventDefault(),document.execCommand("insertText",!1,bufferText)}}}),editor.summernote("fontName","Blinker"),editor.summernote("fontSize",14),editor.summernote("foreColor","black"),$("form").each((function(){$(this).data("validator")&&($(this).data("validator").settings.ignore=".note-editor *")}))}function EnableDataTable(tableClass,cookieKey,rowOrder=!1,rowOrderIndex=1){$(document).on("click","input[type='checkbox'].datatables-check",(function(){!0===$(this).prop("checked")?$(this).parents("tr").addClass("bg-white"):($("[data-parent-id='"+$(this).attr("data-parent-id")+"'].datatables-check:checked").length<1&&$("[id='bulk-"+$(this).attr("data-parent-id")+"'].datatables-bulk-check").prop("checked",!1),$(this).parents("tr").removeClass("bg-white")),CountCheckedRows()>0?($("#check-counter, .check-counter").html(CountCheckedRows()),ShowBulkContainer()):HideBulkContainer()})),$("input[type='checkbox'].datatables-bulk-check").click((function(){var bulkId=$(this).attr("id");bulkId=bulkId.substring(bulkId.indexOf("-")+1),!0===$(this).prop("checked")?$("[data-parent-id='"+bulkId+"'].datatables-check").each((function(){$(this).prop("checked",!0),$(this).parents("tr").addClass("bg-white")})):$("[data-parent-id='"+bulkId+"']").each((function(){$(this).prop("checked",!1),$(this).parents("tr").removeClass("bg-white")})),CountCheckedRows()>0?($("#check-counter, .check-counter").html(CountCheckedRows()),ShowBulkContainer()):HideBulkContainer()}));var hiddenColumns=[];null!==GetCookie(cookieKey)&&(0===(hiddenColumns=GetCookie(cookieKey).split(",").map(Number))[0]?hiddenColumns=[]:hiddenColumns.forEach((function(element){$("[data-table-column-id='"+element+"'].datatables-column-toggle").prop("checked",!1)})));var dataTableOptions={dom:"t",orderMulti:!1,autoWidth:!1,paging:!1,columnDefs:[{targets:"no-sort",orderable:!1},{targets:hiddenColumns,visible:!1}]};$(".datatables-th-dropdown .custom-control").click((function(e){e.stopPropagation()}));var dt=$(tableClass).DataTable(dataTableOptions);return rowOrder&&dt.on("order.dt search.dt",(function(){dt.column(rowOrderIndex,{search:"applied",order:"applied"}).nodes().each((function(cell,i){cell.innerHTML=i<9?"0"+(i+1):i+1}))})).draw(),dt}function EnableDataTableFromLocalStorage(tableClass,cookieKey,rowOrder=!1,rowOrderIndex=1){$(document).on("click","input[type='checkbox'].datatables-check",(function(){!0===$(this).prop("checked")?$(this).parents("tr").addClass("bg-white"):($("[data-parent-id='"+$(this).attr("data-parent-id")+"'].datatables-check:checked").length<1&&$("[id='bulk-"+$(this).attr("data-parent-id")+"'].datatables-bulk-check").prop("checked",!1),$(this).parents("tr").removeClass("bg-white")),CountCheckedRows()>0?($("#check-counter, .check-counter").html(CountCheckedRows()),ShowBulkContainer()):HideBulkContainer()})),$("input[type='checkbox'].datatables-bulk-check").click((function(){var bulkId=$(this).attr("id");bulkId=bulkId.substring(bulkId.indexOf("-")+1),!0===$(this).prop("checked")?$("[data-parent-id='"+bulkId+"'].datatables-check").each((function(){$(this).prop("checked",!0),$(this).parents("tr").addClass("bg-white")})):$("[data-parent-id='"+bulkId+"']").each((function(){$(this).prop("checked",!1),$(this).parents("tr").removeClass("bg-white")})),CountCheckedRows()>0?($("#check-counter, .check-counter").html(CountCheckedRows()),ShowBulkContainer()):HideBulkContainer()}));var hiddenColumns=[];null!==window.localStorage.getItem("GlobalFilter")&&(0===(hiddenColumns=window.localStorage.getItem("GlobalFilter").split(",").map(Number))[0]?hiddenColumns=[]:hiddenColumns.forEach((function(element){$("[data-table-column-id='"+element+"'].datatables-column-toggle").prop("checked",!1)})));var dataTableOptions={dom:"t",orderMulti:!1,autoWidth:!1,paging:!1,columnDefs:[{targets:"no-sort",orderable:!1},{targets:hiddenColumns,visible:!1}]};$(".datatables-th-dropdown .custom-control").click((function(e){e.stopPropagation()}));for(var dt=$(tableClass).DataTable(dataTableOptions),i=0;i<dt.columns.length;i++)console.log(dt.columns[i]);return rowOrder&&dt.on("order.dt search.dt",(function(){dt.column(rowOrderIndex,{search:"applied",order:"applied"}).nodes().each((function(cell,i){cell.innerHTML=i<9?"0"+(i+1):i+1}))})).draw(),dt}function CountCheckedRows(){return $(".datatables-check:checked").length}function GetCheckedRows(){var checkedRows=[];return $(".datatables-check:checked").each((function(){checkedRows.push($(this).attr("id"))})),checkedRows}function ShowBulkContainer(){$(".bulk-actions-container").addClass("show"),$(".bulk-hidden-space").removeClass("d-none")}function HideBulkContainer(){$(".bulk-actions-container").removeClass("show"),$(".bulk-hidden-space").addClass("d-none")}function DeselectAll(){$(".datatables-check:checked").each((function(){$(this).prop("checked",!1).parents("tr").removeClass("bg-white")})),$(".datatables-bulk-check:checked").each((function(){$(this).prop("checked",!1)})),HideBulkContainer()}function DisableButton(button){$(button).prop("disabled",!0).html(BUTTON_LOADER)}function LoadMore($this,url){DisableButton($this),$.ajax({url:url,type:"GET",data:{parentType:$this.attr("data-parent-type"),parentId:$this.attr("data-parent-id"),skip:$this.attr("data-skip"),filter:GetFilterValues()},traditional:!0,success:function(result){var tbody=$("#tbody-"+$this.attr("data-parent-id")),dt=tbody.parents(".bizon-datatable").DataTable();$(result).filter("tr").each((function(i,v){dt.row.add($(v))})),tbody.append(result);var loadMoreButton=$("[data-parent-id='"+$this.attr("data-parent-id")+"'].load-more");tbody.children().length-loadMoreButton.attr("data-skip")<10?loadMoreButton.hide():(EnableButton($this,"Load more"),loadMoreButton.attr("data-skip",tbody.children().length)),$("[data-parent-id='"+$this.attr("data-parent-id")+"'].entity-counter").html(tbody.children().length)},error:function(){$.errorAlert({title:"Error",message:"Could not load activities."})}})}function EnableButton(button,text){$(button).removeAttr("disabled").html(text)}function StopPropagation(){$(".collapse-button").click((function(e){e.stopPropagation()})),$(".collapse-container .dropdown-item").click((function(e){e.stopPropagation(),$(this).parents(".dropdown-menu.show").dropdown("hide")})),$(".datatables-th-dropdown .custom-control").click((function(e){e.stopPropagation()}))}function StopCollapseButtonPropagation(){$(document).on("click",".stop-propagation",(function(e){e.stopPropagation()}))}function GetPriorityBadgeColor(priority){switch(priority){case"Critical":return"badge-outline-danger";case"High":return"badge-outline-warning";case"Medium":return"badge-outline-primary";default:return"badge-outline-info"}}function GetPriorityTextColor(priority){switch(priority){case"Critical":return"text-danger";case"High":return"text-warning";case"Medium":return"text-primary";default:return"text-info"}}function GetProgressBarColor(percentage){return percentage<=100?"bg-success":"bg-danger"}function DeleteTableRowCollapseUpdate(entityId,noEntitiesMessage){var row=$("tr[id='entity-"+entityId+"']"),parentCollapse=row.parents(".collapse-datatable"),parentTable=row.parents(".bizon-datatable").DataTable(),id=parentCollapse.attr("id");id=id.substring(id.indexOf("-")+1),row.parents("tbody").children().length<=1?parentCollapse.html('<p class="mb-0 mt-2">'+noEntitiesMessage+"</p>"):(row.remove(),parentTable.row("#entity-"+entityId).remove());var count=$("[id='count-"+id+"'].collapse-count");count.html(count.html()-1)}function DeleteTableRow(entityId,collectionContainerId,noEntitiesMessage){var row=$("tr[id='entity-"+entityId+"']"),parentTable=row.parents(".bizon-datatable").DataTable();row.parents("tbody").children().length<=1?$(collectionContainerId).html('<p class="mb-0 mt-2">'+noEntitiesMessage+"</p>"):(row.remove(),parentTable.row("#entity-"+entityId).remove())}function DeleteRowCompleted(entityId,noEntitiesMessage,noOngoingEntitiesMessage){var rowToDelete=$("tr[id='entity-"+entityId+"']"),parentCollapse=rowToDelete.parents(".collapse-datatable"),parentTable=rowToDelete.parents(".bizon-datatable").DataTable(),tBody=rowToDelete.parents("tbody"),parentId=tBody.parents(".table-wrapper").attr("data-parent-id"),hasAttribute;if(void 0!==tBody.attr("id")&&!1!==tBody.attr("id")&&tBody.attr("id").startsWith("tbody-comp")){if(tBody.children().length<=1)$(`[data-parent-id='${parentId}'].show-completed`).remove(),tBody.parents(".completed-activities").remove();else{rowToDelete.remove(),parentTable.row("#entity-"+entityId).remove();var entityCounterCompleted=$(`[data-parent-id='${parentId}'].entity-counter-comp`);entityCounterCompleted.html(entityCounterCompleted.html()-1)}parentCollapse.find(".table-wrapper").length||(parentCollapse.find(".text-center").html(noEntitiesMessage).attr("class","mb-0 mt-2 color-secondary"),parentCollapse.find(".no-ongoing").remove())}else if(tBody.children().length<=1)tBody.parents(".table-wrapper").html(noOngoingEntitiesMessage).attr("class","mb-0 mt-2 color-secondary no-ongoing"),parentCollapse.find(".entity-counter-container").remove();else{rowToDelete.remove(),parentTable.row("#entity-"+entityId).remove();var entityCounter=$("[data-parent-id='"+parentId+"'].entity-counter");entityCounter.html(entityCounter.html()-1)}var parentCount=$("[id='count-"+parentId+"'].collapse-count");parentCount.html(parentCount.html()-1)}function GetCheckedParentIds(){var ids=[];return $(".bizon-datatable").has(".datatables-check:checked").each((function(){ids.push($(this).attr("id").replace("table-",""))})),ids}function Delay(callback,ms){var timer=0;return function(){var context=this,args=arguments;clearTimeout(timer),timer=setTimeout((function(){callback.apply(context,args)}),ms||0)}}function CopyToClipboard(element){var $temp=$("<input>");$("body").append($temp),$temp.val($(element).text()).select(),document.execCommand("copy"),$temp.remove(),$.successAlert({message:"ID copied to clipboard."})}function Filter(selector,enumtype){var $this,filterDOM="<div class='dropdown datatables-th-dropdown'><button type='button' class='btn btn-primary' data-toggle='dropdown'>Filter</button><div class='dropdown-menu dropdown-menu-left filter-dropdown'></div></div>";$(selector).html(filterDOM),console.log(enumtype)}function CheckFilters(){var activeFilters;$(".filter-toggle:checked").length>=1?$(".btn-filter").removeClass("btn-outline-primary").addClass("btn-primary"):$(".btn-filter").removeClass("btn-primary").addClass("btn-outline-primary")}function GetFilterValues(){var result=[];return $(".filter-toggle:checked").each((function(){result.push($(this).attr("data-value"))})),result}function FilterRows(){var filters=[];$(".filter-toggle:checked").each((function(){filters.push($(this).attr("data-value"))})),$(".entity-tr").each((function(){filters.includes($(this).attr("data-status"))?$(this).hasClass("d-none")&&$(this).removeClass("d-none"):$(this).hasClass("d-none")||$(this).addClass("d-none")})),$(".parent-content").each((function(){var count=$(this).find(".entity-tr:not(.d-none)").length;$(this).find(".collapse-count").html(count)}))}jQuery.fn.preventDoubleSubmission=function(){return $(this).on("submit",(function(e){var $form=$(this);!0===$form.data("submitted")?e.preventDefault():$form.data("submitted",!0)})),this},function($){$.bindFormModal=function(options){$(document).on("click",options.bindTo,(function(e){e.stopPropagation();var id=$(this).data("id"),url=`/${$(this).data("controller")}/${$(this).data("action")}`,data={};if(null!=options.bulk&&options.bulk){var pName=$(this).data("param-name");null==pName?null!=options.optionalParam?(data.entities=GetCheckedRows(),data[options.optionalParamName]=$(this).attr(options.optionalParam)):data={entities:GetCheckedRows()}:data[pName]=GetCheckedRows()}else if(null!=options.data){var $this=$(this),dict={};$.each(options.data,(function(key,value){dict[key]=$this.attr(value)})),data=dict}else data={id:id};null!=options.modalSize?$("#modal .modal-dialog").removeClass("modal-lg").addClass(options.modalSize):$("#modal .modal-dialog").hasClass("modal-lg")||$("#modal .modal-dialog").addClass("modal-lg"),$("#modal .modal-delete-content").hasClass("d-none")||$("#modal .modal-delete-content").addClass("d-none"),$("#modal .modal-bulk-delete-content").hasClass("d-none")||$("#modal .modal-bulk-delete-content").addClass("d-none"),$("#modal .modal-title").html(options.modalTitle),$("#modal .modal-inner").html(LOADER),$("#modal").modal("show"),$.ajax({url:url,type:"GET",data:data,traditional:!(null==options.bulk||!options.bulk),success:function(result){$("#modal .modal-inner").html(result),null!=options.eventFunction&&options.eventFunction(result)},error:function(){$.errorAlert({title:"Error",message:"Could not load data."})}})}))},$.bindDeleteModal=function(options){$(document).on("click",options.bindTo,(function(e){e.stopPropagation();var url="/"+$(this).data("controller")+"/"+$(this).data("action");nameParam=$(this).data("param-name");var parentId=$(this).data("parent-id");null!=parentId&&($("#modal-delete-form #parent-id").length?$("#modal-delete-form #parent-id").val(parentId):$("#modal-delete-form").append("<input id='parent-id' name='parentId' type='hidden' value='"+parentId+"' />")),null!=options.colorButton?($("#modal-bulk-delete-button").attr("class","btn btn-success"),$("#modal-delete-button").attr("class","btn btn-success")):($("#modal-bulk-delete-button").attr("class","btn btn-danger"),$("#modal-delete-button").attr("class","btn btn-danger")),null!=options.modalSize&&$("#modal .modal-dialog").removeClass("modal-lg").addClass(options.modalSize),null==options.bodyActionName&&(options.bodyActionName="Delete"),null!=options.bulk&&options.bulk?(!0===$(options.bindTo).data("get-parent")&&(parentID=GetCheckedParentIds()),$("#modal .modal-delete-content").hasClass("d-none")||$("#modal .modal-delete-content").addClass("d-none"),options.singleDelete?selectedRows.push($(this).data("id")):selectedRows=GetCheckedRows(),$("#modal .modal-bulk-delete-content").removeClass("d-none"),$("#modal .modal-bulk-delete-content .modal-body").html(options.bodyActionName+" selected "+options.type+"?"),deleteSuccessMessage=null!=options.successMessage?options.successMessage:"Selected entities have been deleted.",deleteErrorMessage=null!=options.errorMessage?options.errorMessage:"Could not delete selected entities."):($("#modal .modal-bulk-delete-content").hasClass("d-none")||$("#modal .modal-bulk-delete-content").addClass("d-none"),$("#modal #modal-delete-id").val($(this).data("id")),$("#modal .modal-delete-content").removeClass("d-none"),null!=options.timeLogDelete&&!0===options.timeLogDelete?$("#modal .modal-delete-content .modal-body").html("Please confirm time log deletion.<br /><b>"+$(this).attr("data-date")+"</b>, you logged <b>"+$(this).attr("data-time")+"</b> hour(s) on activity <b>"+$(this).attr("data-activity")+"</b>"):$("#modal .modal-delete-content .modal-body").html(options.bodyActionName+' "<b>'+$(this).attr("data-name")+'</b>" '+options.type+"?"),deleteSuccessMessage=null!=options.successMessage?options.successMessage:"Entity has been deleted.",deleteErrorMessage=null!=options.errorMessage?options.errorMessage:"Could not delete entity.",redirectUrl=null!=options.redirectUrl?options.redirectUrl:""),deleteSuccessTitle=null!=options.successTitle?options.successTitle:"Success",deleteErrorTitle=null!=options.errorTitle?options.errorTitle:"Error",deleteEventFunction=null!=options.eventFunction?options.eventFunction:function(){return!0},$("#modal").modal("show"),$("#modal #modal-url").val(url),$("#modal .modal-title").html(null!=options.modalTitle?options.modalTitle:"Delete"),$("#modal .modal-inner").html(""),$("#modal-delete-button").text(options.bodyActionName),$("#modal-bulk-delete-button").text(options.bodyActionName)}))},$.confirmDelete=function(options){$("#modal-delete-button").click((function(e){DisableButton("#modal-delete-button"),console.log($("#modal-url").val()),$.ajax({url:$("#modal-url").val(),type:"POST",data:$("#modal-delete-form").serialize(),success:function(result){deleteEventFunction(result),$.successAlert({title:deleteSuccessTitle,message:deleteSuccessMessage}),$("#modal").modal("hide"),redirectUrl.length>0&&setTimeout((function(){window.location=redirectUrl}),3e3)},error:function(){$.errorAlert({title:deleteErrorTitle,message:deleteErrorMessage})},complete:function(){EnableButton("#modal-delete-button","Delete")}}),e.preventDefault()})),$("#modal-bulk-delete-button").click((function(e){DisableButton("#modal-bulk-delete-button");var genericParamName={};genericParamName.__RequestVerificationToken=$("#modal-bulk-delete-form [name=__RequestVerificationToken]").val(),null==nameParam?genericParamName.entities=selectedRows:(null!==parentID&&(genericParamName.parentId=parentID),genericParamName[nameParam]=selectedRows,console.log(genericParamName)),$.ajax({url:$("#modal-url").val(),type:"POST",data:genericParamName,success:function(result){deleteEventFunction(result),$.successAlert({title:deleteSuccessTitle,message:deleteSuccessMessage}),$("#modal").modal("hide")},error:function(){$.errorAlert({title:deleteErrorTitle,message:deleteErrorMessage})},complete:function(){EnableButton("#modal-bulk-delete-button","Delete")}})}))},$.saveChanges=function(options,resetForm=!1){$(options.bindTo).click((function(e){var form=$(options.formId),isValid;form.valid()?(DisableButton(options.bindTo),$.ajax({url:options.ajaxUrl,type:"POST",data:form.serialize(),success:function(result){null!=options.eventFunction&&options.eventFunction(result),null!=options.hideSuccessAlert&&options.hideSuccessAlert||$.successAlert({title:null!=options.successTitle?options.successTitle:"Success",message:null!=options.successMessage?options.successMessage:"Your data has been saved."}),resetForm&&(form.trigger("reset"),$(".filter-option-inner-inner").text("- Select -"),$("#summernote-create").summernote("reset")),null!=options.new&&options.new||$("#modal").modal("hide")},error:function(){$.errorAlert({title:null!=options.errorTitle?options.errorTitle:"Error",message:null!=options.errorMessage?options.errorMessage:"Could not save data."})},complete:function(){EnableButton(options.bindTo,null!=options.buttonText?options.buttonText:"Save")}}),e.preventDefault()):e.preventDefault()}))},$.notificationAlert=function(options){$.notify({title:options.title,message:options.message,url:options.url},{type:"minimalist",url_target:"_blank",newest_on_top:!0,animate:{enter:"animated fadeInRight",exit:"animated fadeOutRight"},mouse_over:"pause",template:'<div data-notify="container" class="col-xs-11 col-sm-3 col-11 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="title">{1}</span><span data-notify="message">{2}</span><a href="{3}" target="{4}" data-notify="url"></a></div>'})},$.successAlert=function(options){$.notify({title:options.title,message:options.message},{type:"success",delay:null!=options.timer?options.timer:2500,animate:{enter:"animated fadeInRight",exit:"animated fadeOutRight"},newest_on_top:!0,template:'<div data-notify="container" class="col-xs-11 col-sm-3 col-11 alert alert-{0}" role="alert"><span data-notify="title">{1}</span><span data-notify="message">{2}</span></div>'})},$.errorAlert=function(options){$.notify({title:options.title,message:options.message},{type:"danger",delay:null!=options.timer?options.timer:0,animate:{enter:"animated fadeInRight",exit:"animated fadeOutRight"},newest_on_top:!0,template:'<div data-notify="container" class="col-xs-11 col-sm-3 col-11 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">×</button><span data-notify="title">{1}</span><span data-notify="message">{2}</span></div>'})},$.bindColumnToggle=function(options){var hiddenColumns=[];$(".datatables-column-toggle").click((function(){var $this=$(this),column=$this.attr("data-table-column-id");null!==GetCookie(options.cookieKey)&&0!==GetCookie(options.cookieKey).split(",").map(Number)[0]&&(hiddenColumns=GetCookie(options.cookieKey).split(",")),$(".bizon-datatable").each((function(){var data=$(this).dataTable().toArray();!1===$this.prop("checked")?(data.forEach((function(element){$(element).DataTable().columns().column(column).visible(!1)})),hiddenColumns.includes(column)||hiddenColumns.push(column)):(data.forEach((function(element){$(element).DataTable().columns().column(column).visible(!0)})),hiddenColumns.includes(column)&&hiddenColumns.splice(hiddenColumns.indexOf(column),1))})),document.cookie=options.cookieKey+"="+hiddenColumns}))},$.bindColumnToggleLocalStorage=function(options){$(".datatables-column-toggle").click((function(){var $this=$(this),column=$this.attr("data-table-column-id"),hiddenColumns=[];null!==window.localStorage.getItem("GlobalFilter")&&0!==window.localStorage.getItem("GlobalFilter").split(",").map(Number)[0]&&(hiddenColumns=window.localStorage.getItem("GlobalFilter").split(",")),$(".dt-global").each((function(){var data=$(this).dataTable().toArray();!1===$this.prop("checked")?(data.forEach((function(element){$(element).DataTable().columns().column(column).visible(!1)})),hiddenColumns.includes(column)||hiddenColumns.push(column)):(data.forEach((function(element){$(element).DataTable().columns().column(column).visible(!0)})),hiddenColumns.includes(column)&&hiddenColumns.splice(hiddenColumns.indexOf(column),1))})),window.localStorage.setItem("GlobalFilter",hiddenColumns)}))},$.bindSearch=function(options){var hiddenContents=[];$(".search-input").keyup((function(){var searchValue=$(this).val();searchValue.length>0?$(".parent-content").each((function(){var parentContent=$(this);parentContent.find(".bizon-datatable").length>0||parentContent.hasClass("d-none")||(parentContent.addClass("d-none"),hiddenContents.push(parentContent))})):($.each(hiddenContents,(function(key,value){value.hasClass("d-none")&&value.removeClass("d-none")})),hiddenContents=[]),$(".bizon-datatable:not(.ignore-search)").each((function(){$(this).DataTable().search(searchValue).draw();var tableParent,groupId=$(this).parents(".collapse-datatable").attr("id");if(groupId=groupId.substring(groupId.indexOf("-")+1),0!=$(this).find(".dataTables_empty").length){var parentContent;$(`[id='${groupId}'].parent-content`).hasClass("d-none")||$(`[id='${groupId}']`).addClass("d-none")}else{if(searchValue.length>0){var collapse=$("[id='parent-"+groupId+"']");if(!collapse.hasClass("show")){collapse.addClass("show"),searchResult.push(collapse);var card=$("[href='#parent-"+groupId+"'].collapse-container");card.attr("aria-expanded",!0),searchIcons.push(card)}}else $.each(searchResult,(function(key,value){value.hasClass("show")&&value.removeClass("show")})),$.each(searchIcons,(function(key,value){value.attr("aria-expanded",!1)})),searchIcons=[];var content;$(`[id='${groupId}'].parent-content`).hasClass("d-none")&&$(`[id='${groupId}']`).removeClass("d-none")}var noResults=$(".no-results");searchValue.length>0&&$(".parent-content:not(.d-none)").length<1?noResults.hasClass("d-none")&&noResults.removeClass("d-none"):noResults.hasClass("d-none")||noResults.addClass("d-none")}))}))},$.bindFilter=function(options){var container=$(options.container),filterDom='<div class="dropdown datatables-th-dropdown"><button type="button" class="btn btn-outline-primary btn-filter p-0" data-toggle="dropdown"><span class="filter-icon"></span></button><div class="dropdown-menu dropdown-menu-left filter-dropdown"></div></div>',filterFlexWrapper='<div class="filter-wrapper ml-1"></div>';container.html(filterDom),container.append(filterFlexWrapper);var dropdown=container.find(".dropdown-menu"),wrapper=container.find(".filter-wrapper");$(options.types).each((function(key,value){var type=`<div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input filter-toggle" id="filter-${value.name}" data-value="${value.value}" ${!0===value.default?"checked":""} /><label class="custom-control-label" for="filter-${value.name}">${value.name}<span>${value.description}</span></label></div>`;dropdown.append(type)})),$(".datatables-th-dropdown .custom-control").click((function(e){e.stopPropagation()}));var activeFiltersCount=0,activeFilters=[];null!==GetCookie(options.cookieKey)?(0!==GetCookie(options.cookieKey).split(",").map(Number)[0]&&(activeFilters=GetCookie(options.cookieKey).split(",").map(Number)),$("input[type='checkbox'].filter-toggle").each((function(){$(this).prop("checked",!1)})),$.isEmptyObject(activeFilters)?($(options.types).each((function(key,value){!0===value.default&&(activeFilters.push(value.value),$("input[data-value='"+value.value+"'].filter-toggle").prop("checked",!0),activeFiltersCount++)})),document.cookie=options.cookieKey+"="+activeFilters):$(activeFilters).each((function(key,value){$("input[data-value='"+value+"'].filter-toggle").prop("checked",!0),activeFiltersCount++}))):($(options.types).each((function(key,value){!0===value.default&&(activeFilters.push(value.value),activeFiltersCount++)})),document.cookie=options.cookieKey+"="+activeFilters),CheckFilters(),$(".filter-toggle").click((function(){var toggle=$(this),enumValue=toggle.data("value").toString();null!==GetCookie(options.cookieKey)&&0!==GetCookie(options.cookieKey).split(",").map(Number)[0]&&(activeFilters=GetCookie(options.cookieKey).split(",")),!0===toggle.prop("checked")?(activeFilters.includes(enumValue)||activeFilters.push(enumValue),$("[data-value='"+enumValue+"'].active-filter").removeClass("d-none")):(activeFilters.includes(enumValue)&&activeFilters.splice(activeFilters.indexOf(enumValue),1),$("[data-value='"+enumValue+"'].active-filter").addClass("d-none")),$("#filter-counter").html(activeFilters.length),activeFilters.length>0&&$(".active-filter").removeClass("d-none"),document.cookie=options.cookieKey+"="+activeFilters,CheckFilters(),null!=options.refreshFunction&&options.refreshFunction()}));var badge=`<div class="badge badge-outline-primary active-filter"><span id='filter-counter'>${activeFiltersCount}</span> filters<span class="cancel-filter"></span></div>`;wrapper.append(badge),$(".cancel-filter").click((function(){$(this).parent().addClass("d-none"),$(".filter-toggle").each((function(){$(this).prop("checked",!1)})),activeFilters=[],document.cookie=options.cookieKey+"="+activeFilters,CheckFilters(),null!=options.refreshFunction&&options.refreshFunction()}))}}(jQuery),$(document).ready((function(){feather.replace();var $hamburger=$(".hamburger"),$slideMenu=$(".main-nav-slide"),$mainContent=$(".main-content"),$navUserButton=$(".nav-user-button"),$sidebarClose=$(".side-nav-close"),$sidebar=$(".side-nav"),$overlay=$(".overlay");$hamburger.on("click",(function(e){$hamburger.toggleClass("is-active"),$slideMenu.toggleClass("is-active"),$mainContent.toggleClass("is-active")})),$navUserButton.on("click",(function(e){$sidebar.addClass("is-active"),$overlay.addClass("is-active")})),$sidebarClose.on("click",(function(e){$sidebar.removeClass("is-active"),$overlay.removeClass("is-active")})),$overlay.on("click",(function(e){$(this).hasClass("is-active")&&($sidebar.removeClass("is-active"),$overlay.removeClass("is-active"))})),$(window).scroll((function(){$(this).scrollTop()>100?$("#top-scroll").addClass("is-active"):$("#top-scroll").removeClass("is-active")})),$("#top-scroll").click((function(){return $("html, body").animate({scrollTop:0},500),!1})),$("#deselect-all").click((function(){DeselectAll()})),$("#global-search").keyup(Delay((function(){var main=$("#main-content"),searchResultContainer=$("#global-search-result");if($(this).val().length<1)return main.hasClass("d-none")&&main.removeClass("d-none"),void(searchResultContainer.hasClass("d-none")||(searchResultContainer.addClass("d-none"),searchResultContainer.html("")));$.ajax({url:"/Activities/SearchAllActivities",type:"GET",data:{searchValue:$(this).val()},success:function(result){main.hasClass("d-none")||main.addClass("d-none"),searchResultContainer.hasClass("d-none")&&searchResultContainer.removeClass("d-none"),searchResultContainer.html(result)},error:function(){$.errorAlert({title:"Error",message:"Search failed."})}})}),500)),$("body").on("click","#global-reset",(function(){var searchInput=$("#global-search"),searchResultContainer=$("#global-search-result"),main=$("#main-content");main.hasClass("d-none")&&main.removeClass("d-none"),searchResultContainer.hasClass("d-none")||(searchResultContainer.addClass("d-none"),searchResultContainer.html("")),searchInput.val("")})),$(".dark-mode-switcher").click((function(){var body=$("body"),layerClass=".top-layer",layers=document.querySelectorAll(layerClass);for(const layer of layers)layer.classList.toggle("active");setTimeout((function(){body.toggleClass("dark-theme"),body.hasClass("dark-theme")?document.cookie="DarkTheme=true;path=/":document.cookie="DarkTheme=false;path=/"}),500)}))}));